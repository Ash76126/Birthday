<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Final Letter üéÇüíù</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">

  <style>
    /* Page 3 base styles */
    body.page3 {
      background: linear-gradient(135deg, #12002f 0%, #000 40%, #12002f 100%) !important;
      background-size: 400% 400% !important;
      animation: gradientShift 10s ease infinite !important;
      color: #fff !important;
      font-family: 'Poppins', sans-serif !important;
      padding: 1rem !important;
      overflow-y: auto !important;
      overflow-x: hidden !important;
      height: 100vh !important;
      width: 100vw !important;
      display: flex !important;
      align-items: flex-start !important;
      justify-content: center !important;
      padding-top: 1rem !important;
    }

    .letter-wrapper {
      max-width: 500px !important;
      width: 95% !important;
      padding: 1.5rem 1rem !important;
      background: rgba(255,255,255,0.08) !important;
      border: 1px solid rgba(255,255,255,0.12) !important;
      border-radius: 15px !important;
      backdrop-filter: blur(14px) !important;
      box-shadow: 0 8px 32px rgba(0,0,0,0.4) !important;
      text-align: center !important;
      max-height: 95vh !important;
      overflow-y: auto !important;
    }

    body.page3 h1 {
      color: #ffaad5 !important;
      font-size: 1.3rem !important;
      margin-bottom: 0.8rem !important;
    }

    .letter-paragraph {
      font-size: 0.8rem !important;
      line-height: 1.4 !important;
      margin-bottom: 1rem !important;
      text-align: left !important;
      color: #f1f1f1 !important;
    }

    .signature {
      font-size: 0.8rem !important;
      margin: 0.8rem 0 !important;
      color: #ffaad5 !important;
      font-style: italic !important;
    }

    /* Enhanced 3D Rotating Cake */
    .cake-area {
      margin: 2rem 0 !important;
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      perspective: 800px !important;
      height: 200px !important;
    }

    .cake-container {
      position: relative !important;
      width: 160px !important;
      height: 160px !important;
      transform-style: preserve-3d !important;
      animation: rotate360 8s linear infinite !important;
    }

    /* Cake Base (Plate) */
    .cake-plate {
      position: absolute !important;
      bottom: -15px !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
      width: 180px !important;
      height: 25px !important;
      border-radius: 50% !important;
      background: linear-gradient(135deg, #e8e8e8, #b8b8b8) !important;
      box-shadow: 
        0 5px 15px rgba(0,0,0,0.3),
        inset 0 2px 5px rgba(255,255,255,0.5),
        inset 0 -2px 5px rgba(0,0,0,0.2) !important;
    }

    /* Main Cake Body - Multiple Layers for 3D Effect */
    .cake-body {
      position: absolute !important;
      bottom: 20px !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
      width: 130px !important;
      height: 90px !important;
      border-radius: 15px !important;
      background: linear-gradient(145deg, #ff6b9d, #ff8f69) !important;
      box-shadow: 
        0 0 30px rgba(255, 107, 157, 0.8),
        inset 0 5px 15px rgba(255,255,255,0.3),
        inset 0 -5px 15px rgba(0,0,0,0.2),
        0 15px 30px rgba(0,0,0,0.4) !important;
      position: relative !important;
      overflow: hidden !important;
    }

    /* Cake Side Highlights for 3D Depth */
    .cake-body::before {
      content: '' !important;
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 15px !important;
      height: 100% !important;
      background: linear-gradient(90deg, rgba(255,255,255,0.4), transparent) !important;
      border-radius: 15px 0 0 15px !important;
    }

    .cake-body::after {
      content: '' !important;
      position: absolute !important;
      top: 0 !important;
      right: 0 !important;
      width: 15px !important;
      height: 100% !important;
      background: linear-gradient(270deg, rgba(0,0,0,0.3), transparent) !important;
      border-radius: 0 15px 15px 0 !important;
    }

    /* Realistic Icing with Drips */
    .icing {
      position: absolute !important;
      top: -25px !important;
      left: 0 !important;
      width: 100% !important;
      height: 35px !important;
      background: linear-gradient(135deg, #fff, #f5f5f5) !important;
      border-radius: 15px 15px 20px 20px !important;
      clip-path: path("M0,20 Q10,35 25,18 Q40,30 55,15 Q70,32 85,20 Q100,28 115,16 Q125,35 130,20 L130,0 L0,0 Z") !important;
      box-shadow: 
        0 3px 15px rgba(0,0,0,0.2),
        inset 0 2px 8px rgba(255,255,255,0.8),
        inset 0 -2px 8px rgba(0,0,0,0.1) !important;
    }

    /* Enhanced 3D Candle */
    .candle {
      position: absolute !important;
      top: -55px !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
      width: 18px !important;
      height: 50px !important;
      border-radius: 8px !important;
      background: linear-gradient(135deg, #ffe066 0%, #ffd700 50%, #ffb300 100%) !important;
      background-image: 
        repeating-linear-gradient(45deg, 
          rgba(255,123,0,0.3) 0, rgba(255,123,0,0.3) 3px, 
          transparent 3px, transparent 6px),
        linear-gradient(90deg, rgba(255,255,255,0.4) 0%, transparent 30%, transparent 70%, rgba(0,0,0,0.2) 100%) !important;
      box-shadow: 
        0 0 15px rgba(255,224,102,0.8),
        inset 2px 0 5px rgba(255,255,255,0.5),
        inset -2px 0 5px rgba(0,0,0,0.2) !important;
    }

    /* Ultra Realistic Flame */
    .flame {
      position: absolute !important;
      top: -30px !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
      width: 16px !important;
      height: 28px !important;
      border-radius: 50% 50% 50% 50%/60% 60% 40% 40% !important;
      background: radial-gradient(ellipse at 30% 80%, #ffed4e 0%, #ff6b35 30%, #d73502 60%, #ad2d07 100%) !important;
      filter: blur(0.8px) !important;
      animation: realisticFlame 1.5s infinite ease-in-out !important;
      box-shadow: 
        0 0 25px rgba(255,237,78,0.9),
        0 0 50px rgba(255,107,53,0.6),
        0 0 75px rgba(215,53,2,0.3) !important;
    }

    /* Flame Inner Core for More Realism */
    .flame::before {
      content: '' !important;
      position: absolute !important;
      top: 3px !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
      width: 8px !important;
      height: 18px !important;
      border-radius: 50% 50% 50% 50%/60% 60% 40% 40% !important;
      background: radial-gradient(ellipse at 30% 70%, #fff5b7 0%, #ffed4e 40%, #ff9500 80%) !important;
      animation: innerFlame 1.8s infinite ease-in-out !important;
    }

    /* 360 Degree Rotation */
    @keyframes rotate360 {
      0% { transform: rotateY(0deg) rotateX(15deg); }
      25% { transform: rotateY(90deg) rotateX(15deg); }
      50% { transform: rotateY(180deg) rotateX(15deg); }
      75% { transform: rotateY(270deg) rotateX(15deg); }
      100% { transform: rotateY(360deg) rotateX(15deg); }
    }

    /* Realistic Flame Animation */
    @keyframes realisticFlame {
      0%, 100% { 
        transform: translateX(-50%) scale(1) rotate(-2deg) scaleY(1);
        background: radial-gradient(ellipse at 30% 80%, #ffed4e 0%, #ff6b35 30%, #d73502 60%, #ad2d07 100%);
        filter: blur(0.8px);
      }
      15% { 
        transform: translateX(-50%) scale(1.05) rotate(1deg) scaleY(1.1);
        background: radial-gradient(ellipse at 25% 75%, #fff176 0%, #ff7043 35%, #e53935 65%, #b71c1c 100%);
        filter: blur(0.6px);
      }
      30% { 
        transform: translateX(-50%) scale(1.1) rotate(-1deg) scaleY(0.95);
        background: radial-gradient(ellipse at 35% 85%, #ffeb3b 0%, #ff5722 25%, #d32f2f 55%, #a5000a 100%);
        filter: blur(1px);
      }
      45% { 
        transform: translateX(-50%) scale(0.95) rotate(2deg) scaleY(1.15);
        background: radial-gradient(ellipse at 40% 70%, #fff59d 0%, #ff8a65 40%, #e57373 70%, #c62828 100%);
        filter: blur(0.7px);
      }
      60% { 
        transform: translateX(-50%) scale(1.08) rotate(-1.5deg) scaleY(1.05);
        background: radial-gradient(ellipse at 20% 80%, #ffecb3 0%, #ffab40 30%, #ff7043 60%, #d84315 100%);
        filter: blur(0.9px);
      }
      80% { 
        transform: translateX(-50%) scale(1.02) rotate(1.5deg) scaleY(0.9);
        background: radial-gradient(ellipse at 45% 75%, #fff8e1 0%, #ffc107 35%, #f57c00 65%, #e65100 100%);
        filter: blur(0.5px);
      }
    }

    /* Inner Flame Animation */
    @keyframes innerFlame {
      0%, 100% { 
        transform: translateX(-50%) scale(1) rotate(1deg);
        opacity: 0.8;
      }
      25% { 
        transform: translateX(-50%) scale(1.1) rotate(-1deg);
        opacity: 0.9;
      }
      50% { 
        transform: translateX(-50%) scale(0.9) rotate(2deg);
        opacity: 1;
      }
      75% { 
        transform: translateX(-50%) scale(1.05) rotate(-0.5deg);
        opacity: 0.85;
      }
    }

    /* Gift Card Styling */
    .giftcard {
      margin: 1.2rem auto !important;
      display: block !important;
      width: 220px !important;
      height: 120px !important;
      cursor: pointer !important;
      position: relative !important;
      perspective: 1000px !important;
    }

    .card-box {
      width: 100% !important;
      height: 100% !important;
      position: relative !important;
      transform-style: preserve-3d !important;
      transition: transform 0.8s ease !important;
    }

    .giftcard.flipped .card-box {
      transform: rotateY(180deg) !important;
    }

    .card-front, .card-back {
      position: absolute !important;
      width: 100% !important;
      height: 100% !important;
      backface-visibility: hidden !important;
      border-radius: 15px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      flex-direction: column !important;
      padding: 1rem !important;
      text-align: center !important;
      box-shadow: 0 6px 20px rgba(0,0,0,0.3) !important;
    }

    .card-front {
      background: linear-gradient(135deg, #ff6ec7, #ffc0cb) !important;
      color: white !important;
      font-weight: bold !important;
      font-size: 1.1rem !important;
    }

    .card-back {
      background: linear-gradient(135deg, #fff, #f8f8f8) !important;
      color: #333 !important;
      transform: rotateY(180deg) !important;
      font-size: 0.75rem !important;
      line-height: 1.3 !important;
    }

    .food-btn {
      margin-top: 0.8rem !important;
      padding: 0.7rem 1.2rem !important;
      background: linear-gradient(45deg, #ff6ec7, #ffc0cb) !important;
      color: white !important;
      border: none !important;
      border-radius: 20px !important;
      font-size: 0.85rem !important;
      font-weight: 600 !important;
      cursor: pointer !important;
      width: 90% !important;
      min-height: 44px !important;
      box-shadow: 0 4px 15px rgba(255, 110, 199, 0.3) !important;
      transition: all 0.3s ease !important;
      font-family: 'Poppins', sans-serif !important;
    }

    .food-btn:hover, .food-btn:active {
      transform: translateY(-1px) !important;
      box-shadow: 0 6px 20px rgba(255, 110, 199, 0.5) !important;
      background: linear-gradient(45deg, #ffc0cb, #ff6ec7) !important;
    }

    /* Hearts */
    body.page3 .heart {
      position: fixed !important;
      top: -10% !important;
      color: rgba(255, 105, 180, 0.4) !important;
      animation: fall linear infinite !important;
      font-size: 1rem !important;
      z-index: 1 !important;
      pointer-events: none !important;
    }

    @keyframes fall {
      0% { transform: translateY(0) rotate(0deg); opacity: 0.4; }
      100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Mobile Optimizations */
    @media (max-width: 768px) {
      .cake-container {
        width: 120px !important;
        height: 120px !important;
      }
      
      .cake-body {
        width: 100px !important;
        height: 70px !important;
      }
      
      .cake-plate {
        width: 140px !important;
      }
      
      .candle {
        width: 14px !important;
        height: 35px !important;
      }
      
      .flame {
        width: 12px !important;
        height: 20px !important;
      }
    }
  </style>
</head>

<body class="page3">
  <div class="heart" style="left: 10%; animation-duration: 3s;">üíñ</div>
  <div class="heart" style="left: 70%; animation-duration: 4s; animation-delay: 2s;">üíï</div>

  <div class="letter-wrapper">
    <h1>Final Letter to You</h1>
    
    <!-- First paragraph with your personal message -->
    <p class="letter-paragraph">
      Somuu, I may never find enough words to measure what your existence does to my world. Kuch gift surprise krna tha mujhe aise sukha sukha wish krna psnd nahi. Fir bhi I tried doing my best, kyuki kuch toh special krna tha na somuuuuu. May all ur wishes come true, May u achieve all the success.‚ô•Ô∏è
    </p>

    <!-- Enhanced 3D Rotating Cake -->
    <div class="cake-area">
      <div class="cake-container">
        <div class="cake-plate"></div>
        <div class="cake-body">
          <div class="icing"></div>
          <div class="candle">
            <div class="flame"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Second paragraph with your personal message -->
    <p class="letter-paragraph">
      If time ever lets us rewrite chapters, know that I'll start with the line where we laughed at 6-7am videocalls jab tum ready hoti thi. (Ekdum cutu lagti thiii) Umm, maybe vo time kabhi wapis ni aaye but vo mere bestest the. Also I'm very bad in paragraphs, baaki toh tumhe pata he hain kya feel krra hu.
    </p>

    <!-- Updated signature -->
    <p class="signature">-Always Here For You, Shah.</p>

    <!-- Gift Card -->
    <div class="giftcard" id="giftCard">
      <div class="card-box">
        <div class="card-front">
          üéÅ<br>
          <strong>Tap to Open</strong>
        </div>
        <div class="card-back">
          <div style="margin-bottom: .8rem; font-size: .75rem; line-height: 1.3;">
            Thank you for painting my ordinary days with colors I didn't know existed.<br>
            No matter how pages turn, those hues will stay vivid forever. üíú
          </div>
          <button class="food-btn" id="foodButton">
            Suno, Idhar Click Karna üò∂
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const giftCard = document.getElementById('giftCard');
    const foodButton = document.getElementById('foodButton');

    giftCard.addEventListener('click', function(e) {
      if (e.target.id !== 'foodButton') {
        this.classList.toggle('flipped');
      }
    });
    
    foodButton.addEventListener('click', function(e) {
      e.stopPropagation();
      window.location.href = 'page4.html';
    });
    
    foodButton.addEventListener('touchstart', function(e) {
      e.stopPropagation();
      e.preventDefault();
      window.location.href = 'page4.html';
    });
    
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function(event) {
      const now = (new Date()).getTime();
      if (now - lastTouchEnd <= 300) {
        event.preventDefault();
      }
      lastTouchEnd = now;
    }, { passive: false });
  </script>
</body>
</html>
